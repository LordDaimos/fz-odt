<?xml version="1.0" encoding="utf-8"?>
<table xmlns="http://query.yahooapis.com/v1/schema/table.xsd">
  <meta>
    <author>Karl-Johan Sj√∂gren</author>
    <description>The table returns a game searchresult for a string on FZ.se.</description>
    <sampleQuery>select * from bible.bible where language='en' and book='Luke' and chapter=11 and passage=10</sampleQuery>
    <documentationURL>http://docs.google.com/View?id=ddq89pzk_155t6rwmkhp</documentationURL>
  </meta>
  <bindings>
    <select produces="JSON" itemPath="">
      <urls>
        <url></url>
      </urls>
      <inputs>
        <key id="searchquery" type="xs:string" paramType="variable" required="false"/>
      </inputs>
      <execute>
        <![CDATA[ 
        if (!searchquery) {
          y.log('No searchquery specified.');
          y.exit();
        }
        var search = 'select * from html where url="http://www.fz.se/sok/?q=$searchquery$&m=0&priorityValue_3=100&priorityValue_1=100&priorityValue_4=100&priorityValue_7=100&priorityValue_6=110&priorityValue_2=50&t%5B%5D=5&priorityValue_5=140" and xpath="//div[starts-with(@class, \'clearfix search_result game\')]"';
        search = search.replace("$searchquery$",searchquery);

        var xml = y.query(search).results;
        y.log(xml);
        
        response.object = <nodes></nodes>;
      ]]>
      </execute>
    </select>
  </bindings>
</table>